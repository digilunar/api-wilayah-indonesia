<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>API Wilayah Indonesia ‚Äì Digilunar Redesign</title>

<!-- Bootstrap 5 -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Vue 3 -->
<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>

<style>
  body {
    background: #f8f9fa;
  }
  .card {
    border-radius: 14px;
  }
  pre {
    background: #1e1e1e;
    color: #e6e6e6;
    border-radius: 10px;
    padding: 15px;
  }
  footer {
    margin-top: 80px;
  }
</style>

</head>
<body>

<div id="app" class="container py-5">

  <h2 class="fw-bold text-center mb-4">
    üåç API Wilayah Indonesia  
    <div class="text-primary fs-4">Redesign oleh Digilunar</div>
  </h2>

  <p class="text-center text-muted mb-5">
    Contoh penggunaan API Wilayah Indonesia (Provinsi ‚Üí Kabupaten ‚Üí Kecamatan ‚Üí Kelurahan)
    dengan tampilan modern & interaktif.
  </p>


  <!-- ===================== PROVINSI ===================== -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h5 class="card-title">Pilih Provinsi</h5>
      <select class="form-select" v-model="provinsiId" @change="loadKabupaten">
        <option value="">-- pilih provinsi --</option>
        <option v-for="p in provinsi" :value="p.id">{{ p.name }}</option>
      </select>
    </div>
    <div class="card-footer">
      <small class="text-muted">GET /province</small>
    </div>
  </div>

  <pre v-if="provinsiId">{{ responseProvinsi }}</pre>


  <!-- ===================== KABUPATEN ===================== -->
  <div class="card shadow-sm mb-4" v-if="kabupaten.length > 0">
    <div class="card-body">
      <h5 class="card-title">Pilih Kabupaten/Kota</h5>
      <select class="form-select" v-model="kabupatenId" @change="loadKecamatan">
        <option value="">-- pilih kabupaten/kota --</option>
        <option v-for="k in kabupaten" :value="k.id">{{ k.name }}</option>
      </select>
    </div>
    <div class="card-footer">
      <small class="text-muted">GET /regency/{{ provinsiId }}</small>
    </div>
  </div>

  <pre v-if="kabupatenId">{{ responseKabupaten }}</pre>


  <!-- ===================== KECAMATAN ===================== -->
  <div class="card shadow-sm mb-4" v-if="kecamatan.length > 0">
    <div class="card-body">
      <h5 class="card-title">Pilih Kecamatan</h5>
      <select class="form-select" v-model="kecamatanId" @change="loadKelurahan">
        <option value="">-- pilih kecamatan --</option>
        <option v-for="k in kecamatan" :value="k.id">{{ k.name }}</option>
      </select>
    </div>
    <div class="card-footer">
      <small class="text-muted">GET /district/{{ kabupatenId }}</small>
    </div>
  </div>

  <pre v-if="kecamatanId">{{ responseKecamatan }}</pre>


  <!-- ===================== KELURAHAN ===================== -->
  <div class="card shadow-sm mb-4" v-if="kelurahan.length > 0">
    <div class="card-body">
      <h5 class="card-title">Pilih Kelurahan</h5>
      <select class="form-select" v-model="kelurahanId">
        <option value="">-- pilih kelurahan --</option>
        <option v-for="k in kelurahan" :value="k.id">{{ k.name }}</option>
      </select>
    </div>
    <div class="card-footer">
      <small class="text-muted">GET /village/{{ kecamatanId }}</small>
    </div>
  </div>

  <pre v-if="kelurahanId">{{ responseKelurahan }}</pre>


  <!-- ================ FOOTER ================ -->
  <footer class="text-center text-muted">
    <p class="mb-1">&copy; 2025 ‚Äì Data Wilayah Indonesia</p>
    
    <p class="mb-1">
      API by:  
      <a href="https://github.com/emsifa/api-wilayah-indonesia" target="_blank">EMSIFA</a>
    </p>

    <p class="fw-bold text-primary">
      Redesain oleh Digilunar  
      <br>
      <a href="https://instagram.com/digilunar" target="_blank">@digilunar</a>
    </p>
  </footer>

</div>



<script>
const API = "https://www.emsifa.com/api-wilayah-indonesia/api";

const app = Vue.createApp({
  data() {
    return {
      provinsi: [],
      kabupaten: [],
      kecamatan: [],
      kelurahan: [],

      provinsiId: "",
      kabupatenId: "",
      kecamatanId: "",
      kelurahanId: "",

      responseProvinsi: "",
      responseKabupaten: "",
      responseKecamatan: "",
      responseKelurahan: ""
    };
  },

  mounted() {
    // load provinsi
    fetch(`${API}/provinces.json`)
      .then(r => r.json())
      .then(data => {
        this.provinsi = data;
        this.responseProvinsi = JSON.stringify(data, null, 2);
      });
  },

  methods: {
    loadKabupaten() {
      this.kabupaten = [];
      this.kecamatan = [];
      this.kelurahan = [];

      fetch(`${API}/regencies/${this.provinsiId}.json`)
        .then(r => r.json())
        .then(data => {
          this.kabupaten = data;
          this.responseKabupaten = JSON.stringify(data, null, 2);
        });
    },

    loadKecamatan() {
      this.kecamatan = [];
      this.kelurahan = [];

      fetch(`${API}/districts/${this.kabupatenId}.json`)
        .then(r => r.json())
        .then(data => {
          this.kecamatan = data;
          this.responseKecamatan = JSON.stringify(data, null, 2);
        });
    },

    loadKelurahan() {
      this.kelurahan = [];

      fetch(`${API}/villages/${this.kecamatanId}.json`)
        .then(r => r.json())
        .then(data => {
          this.kelurahan = data;
          this.responseKelurahan = JSON.stringify(data, null, 2);
        });
    }
  }
});

app.mount("#app");
</script>

</body>
</html>
